<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Amazon Athena – AWS ML Specialty Ebook</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="../styles/main.css" />
    <link rel="stylesheet" href="../styles/print.css" media="print" />
  </head>
  <body class="layout">
    <header class="top-nav" role="banner">
      <div class="top-nav-title">AWS Certified Machine Learning – Specialty Ebook</div>
      <nav aria-label="Main navigation">
        <div class="top-nav-links">
          <a href="../index.html" data-page="index.html">Home</a>
          <a href="../toc.html" data-page="toc.html">Table of Contents</a>
          <a href="../practice-questions.html" data-page="practice-questions.html">Practice Questions</a>
          <a href="../glossary.html" data-page="glossary.html">Glossary</a>
          <a href="../cheat-sheet.html" data-page="cheat-sheet.html">Cheat Sheet</a>
          <a href="../search.html" data-page="search.html">Search</a>
          <a href="../about.html" data-page="about.html">About</a>
        </div>
      </nav>
    </header>
    <div class="shell">
      <aside class="sidebar" aria-label="Service navigation">
        <section class="sidebar-section">
          <h2>Analytics &amp; Processing</h2>
          <ul>
            <li><a href="amazon-emr.html">Amazon EMR</a></li>
            <li><a href="amazon-athena.html">Amazon Athena</a></li>
            <li><a href="amazon-redshift.html">Amazon Redshift</a></li>
            <li><a href="amazon-opensearch-service.html">Amazon OpenSearch Service</a></li>
          </ul>
        </section>
      </aside>
      <main class="main-content" role="main">
        <p class="breadcrumbs">
          <a href="../index.html">Home</a> <span aria-hidden="true">›</span>
          <a href="../toc.html#analytics">Analytics</a> <span aria-hidden="true">›</span>
          Amazon Athena
        </p>
        <h1>Amazon Athena</h1>
        <p>
          Amazon Athena is a serverless interactive query service that uses standard SQL to analyze data directly in
          Amazon S3. For ML workloads, it provides a lightweight way to explore datasets, compute aggregates, and build
          training datasets without managing infrastructure.
        </p>

        <section>
          <h2>Key features</h2>
          <ul>
            <li>Serverless: no cluster management; pay per query based on scanned data volume.</li>
            <li>Uses the Glue Data Catalog for table metadata and schema.</li>
            <li>Supports open formats like Parquet, ORC, JSON, and CSV.</li>
            <li>Federated queries to other data sources (for example, RDS, DynamoDB) via connectors.</li>
            <li>Integration with QuickSight and other analytics tools.</li>
          </ul>
        </section>

        <section>
          <h2>Where it fits in ML pipelines</h2>
          <ul>
            <li>Quickly profiling and exploring data stored in S3 prior to modeling.</li>
            <li>Extracting aggregates or filtered datasets into S3 for training.</li>
            <li>Building lightweight feature tables without spinning up EMR clusters.</li>
            <li>Powering BI dashboards that visualize ML outputs alongside raw data.</li>
          </ul>
        </section>

        <section>
          <h2>How it works (high level)</h2>
          <div class="diagram" role="img" aria-label="Athena uses the Data Catalog to query S3 data and returns results to users and tools.">
            <svg viewBox="0 0 540 130" xmlns="http://www.w3.org/2000/svg">
              <rect x="10" y="45" width="110" height="40" fill="#ecfdf5" stroke="#047857" />
              <text x="65" y="70" text-anchor="middle" font-size="11">S3 data lake</text>

              <rect x="150" y="25" width="110" height="40" fill="#e0f2fe" stroke="#0369a1" />
              <text x="205" y="50" text-anchor="middle" font-size="11">Data Catalog</text>

              <rect x="150" y="75" width="110" height="40" fill="#fee2e2" stroke="#b91c1c" />
              <text x="205" y="100" text-anchor="middle" font-size="11">Athena</text>

              <rect x="290" y="45" width="220" height="40" fill="#fef9c3" stroke="#a16207" />
              <text x="400" y="70" text-anchor="middle" font-size="11">Analysts / ML engineers / QuickSight</text>

              <line x1="120" y1="65" x2="150" y2="45" stroke="#4b5563" marker-end="url(#arrow8)" />
              <line x1="120" y1="65" x2="150" y2="95" stroke="#4b5563" marker-end="url(#arrow8)" />
              <line x1="260" y1="45" x2="290" y2="65" stroke="#4b5563" marker-end="url(#arrow8)" />
              <line x1="260" y1="95" x2="290" y2="65" stroke="#4b5563" marker-end="url(#arrow8)" />

              <defs>
                <marker id="arrow8" markerWidth="8" markerHeight="8" refX="8" refY="4" orient="auto">
                  <path d="M0,0 L8,4 L0,8 z" fill="#4b5563" />
                </marker>
              </defs>
            </svg>
          </div>
        </section>

        <section>
          <h2>CLI and SDK examples</h2>
          <h3>Start a query (CLI)</h3>
          <pre><code class="language-bash">aws athena start-query-execution \
  --query-string \"SELECT COUNT(*) FROM ml_lake.features_customers\" \
  --query-execution-context Database=ml_lake \
  --result-configuration OutputLocation=s3://ml-query-results/</code></pre>

          <h3>Start and poll for results (Python, boto3)</h3>
          <pre><code class="language-python">import boto3, time

athena = boto3.client("athena")

resp = athena.start_query_execution(
    QueryString="SELECT label, COUNT(*) FROM ml_lake.train GROUP BY label",
    QueryExecutionContext={"Database": "ml_lake"},
    ResultConfiguration={"OutputLocation": "s3://ml-query-results/"},
)
qid = resp["QueryExecutionId"]

while True:
    status = athena.get_query_execution(QueryExecutionId=qid)["QueryExecution"]["Status"]["State"]
    if status in ("SUCCEEDED", "FAILED", "CANCELLED"):
        print("Status:", status)
        break
    time.sleep(2)</code></pre>
        </section>

        <section>
          <h2>Best practices for ML workloads</h2>
          <ul>
            <li>Store data in columnar formats and partitioned layouts to minimize bytes scanned.</li>
            <li>Use the Glue Data Catalog and Lake Formation for shared metadata and governance.</li>
            <li>Configure workgroups and query limits to control costs.</li>
            <li>Use CTAS (CREATE TABLE AS SELECT) to materialize derived tables efficiently.</li>
            <li>For repeated heavy transformations, consider moving them into Glue or EMR.</li>
          </ul>
        </section>

        <section class="exam-tips callout">
          <h2>Exam tips</h2>
          <ul>
            <li>Athena is the go-to for “serverless SQL on data in S3.”</li>
            <li>Cost questions often hinge on data format and partitions, not on the query engine itself.</li>
            <li>Know that Athena uses the Glue Data Catalog and integrates with Lake Formation permissions.</li>
          </ul>
        </section>

        <section>
          <h2>Further reading</h2>
          <ul>
            <li><a href="https://docs.aws.amazon.com/athena/latest/ug/what-is.html">Amazon Athena User Guide – What Is Amazon Athena?</a></li>
            <li><a href="https://aws.amazon.com/athena/">Amazon Athena product page</a></li>
            <li><a href="https://aws.amazon.com/blogs/big-data/category/analytics/amazon-athena/">AWS Big Data Blog – Athena</a></li>
          </ul>
        </section>

        <p class="source-line">
          Source: <a href="https://docs.aws.amazon.com/athena/latest/ug/what-is.html">Amazon Athena User Guide</a>.
          Last reviewed: 2025-11-16 (offline, approximate).
        </p>
      </main>
    </div>
    <footer class="site-footer" role="contentinfo">
      Athena is the fastest path to query S3 data with SQL for EDA and lightweight feature engineering.
    </footer>
    <script src="../scripts/prism.js"></script>
    <script src="../scripts/main.js"></script>
  </body>
</html>

